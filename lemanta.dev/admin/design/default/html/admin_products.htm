{* <!-- ===========================================================================
  Система: Impera CMS                                                             |
  Шаблон: список товаров                                                          |
                                                                                  |
  Принимает во входных переменных:                                                |
    $title = текст заголовка страницы                                             |
    $items = массив с записями об товарах                                         |
                                                                                  |
  Использует другие переменные:                                                   |
    $categories = массив с записями о категориях                                  |
    $categories_list = одноуровневый массив с теми же записями о категориях       |
    $all_brands = массив с записями о брендах                                     |
    $brands_list = одноуровневый массив с теми же записями о брендах              |
    $stocks = массив с записями о складах                                         |
    $all_users = массив с записями о пользователях                                |
    $users_list = одноуровневый массив с теми же записями о пользователях         |
    $menus = массив с записями о меню сайта                                       |
    $inputs = индексированный именами некоторых элементов html-формы массив       |
              со значениями этих элементов                                        |
    $PagesNavigation = html-контент навигатора страниц                            |
    $CurrentPageMaxsize = максимальное количество записей на странице             |
    $CurrentPage = индексный номер текущей страницы                               |
    $total_items = количество записей на всех страницах                           |
    $message = текст информационного сообщения, если есть                         |
    $error = текст сообщения об ошибке, если была                                 |
    $settings = объект настроек сайта                                             |
    $admin_folder = имя папки админпанели                                         |
    $theme = полный url папки текущего шаблона клиентской стороны сайта           |
    $site = полный url корня сайта (то есть http://домен.сайта/ например)         |
    $from_page = адрес страницы возврата после операции                           |
    $Token = аутентификатор операции                                              |
    $smarty = объект шаблонизатора                                                |
    $smarty.const = массив констант движка                                        |
                                                                                  |
============================================================================ --> *}{strip}



    {* <!-- кнопки субменю --> *}
    {include file = '../../common_parts/submenu.htm'
             select = 'products'
             main = true
             products = true
             products_kits = true
             categories = true
             brands = true
             properties = true
             stocks = true}



    {* <!-- запоминаем значение дефолтного режима сортировки --> *}
    {$sort_as_is = $smarty.const.SORT_PRODUCTS_MODE_AS_IS}



    {* <!-- адрес корня админпанели --> *}
    {$site = ($site|default:'')|escape}
    {$admin_site = $site|cat:(($admin_folder|default:'')|escape)|cat:'/'}
    {$admin_script = $admin_site|cat:'index.php'}



    {* <!-- адрес для перехода в админпанели (ожидает справа имя модуля) --> *}
    {$param = $smarty.const.REQUEST_PARAM_NAME_SECTION|default:''}
    {$param = $param|regex_replace:'/[=\?#]/':''}
    {$admin_goto = $admin_script|cat:'?'|cat:($param|escape)|cat:'='}



    {* <!-- адрес корня текущего шаблона админпанели --> *}
    {$param = $settings->admin_theme|default:''}
    {$admin_theme = $admin_site|cat:'design/'|cat:($param|escape)|cat:'/'}
    {$theme = ($theme|default:'')|escape}



    {* <!-- часть get-запроса страницы для параметра token --> *}
    {$param = $smarty.const.REQUEST_PARAM_NAME_TOKEN|default:''}
    {$param = $param|regex_replace:'/[=\?#]/':''}
    {$token = ($inputs[$param]|default:$Token)|default:''}
    {$token_request = ($param|cat:'='|cat:$token)|escape}



    {* <!-- filter_editbox(param) = генерация поля ввода для фильтра --> *}
    {function name = 'filter_editbox'
              param = ''}
        {if $param != ''}
            {if $param != ''}
                {eval var = '{$smarty.const.'|cat:$param|cat:'|default:\'\'}'
                      assign = 'param'}
                {$id = $param|escape}
                {$value = $inputs[$param]|default:''}

                {* <!-- поле ввода --> *}
                <input class="edit" id="items_form_{$id}" name="{$id}" type="text" value="{$value|escape}" />
            {/if}
        {/if}
    {/function}



    {* <!-- filter_checkbox(param, shadow, image, style, invertable) = генерация флажка для фильтра --> *}
    {function name = 'filter_checkbox'
              param = ''
              shadow = false
              image = ''
              style = ''
              invertable = false}
        {if $param != ''}
            {eval var = '{$smarty.const.'|cat:$param|cat:'|default:\'\'}'
                  assign = 'param'}
            {if $param != ''}
                {$id = $param|escape}

                {* <!-- теневой флажок (для случая "не выбрано - это тоже состояние") --> *}
                {if $shadow}
                    <input name="{$id}" type="hidden" value="0" />
                {/if}

                {* <!-- флажок --> *}
                {$value = $inputs[$param]|default:0}
                {$checked = ($value != 0) ? 'checked' : ''}
                <input class="checkbox" id="items_form_{$id}" name="{$id}" type="checkbox" {$checked} value="{($value != 0) ? ($value|escape) : 1}" onchange="Start_PageRecordsFilter('items_form');" /> {**}

                {* <!-- картинка --> *}
                {$style = ($style != '') ? ('style="'|cat:$style|cat:'"') : ''}
                <span onclick="Toggle_PageCheckbox('items_form_{$id}');">
                    <img class="icon16x16" src="{$admin_theme|default:''}images/{$image|escape}" {$style} />

                    {* <!-- если поддерживает инверсию действия --> *}
                    {if $invertable}
                        <div class="inverted">
                            <span onclick="var el = document.getElementById('items_form_{$id}'); if (el) if (!el.checked) el.value = -1; else if (el.value != -1) { el.value = -1; el.checked = false; }">
                                противоположный
                            </span>
                            <span onclick="var el = document.getElementById('items_form_{$id}'); if (el) if (!el.checked) el.value = 1; else if (el.value != 1) { el.value = 1; el.checked = false; }">
                                обычный
                            </span>
                        </div>
                    {/if}
                </span>
            {/if}
        {/if}
    {/function}



    {* <!-- hidden_editbox(param, id, value) = генерация скрытого поля ввода --> *}
    {function name = 'hidden_editbox'
              param = ''
              id = false
              value = ''}
        {if $param != ''}
            {eval var = '{$smarty.const.'|cat:$param|cat:'|default:\'\'}'
                  assign = 'param'}
            {if $param != ''}
                {$value = ($value === true) ? ($inputs[$param]|default:'') : $value}
                {$param = $param|escape}
                {$id = ($id) ? ('id="items_form_'|cat:$param|cat:'"') : ''}

                {* <!-- поле ввода --> *}
                <input {$id} name="{$param}" type="hidden" value="{$value|escape}" />
            {/if}
        {/if}
    {/function}



    <div class="box">



        {* <!-- заголовок --> *}
        <h1>
            <div class="path">
                <a href="{$admin_site}" title="Перейти на главную страницу админпанели">
                    Главная
                </a> → Товары
            </div>

            Товары
        </h1>



        {* <!-- инструментальные ссылки --> *}
        <div class="toolkey">
            <a class="left" href="#help" onclick="Show_PageElements('help_box');" title="Показать справочную информацию">
                справка
            </a>

            <a class="left" href="#settings" onclick="Show_PageElements('setup_form');" title="Показать настройки сайта, относящиеся к товарам">
                настройки
            </a>

            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

            <a href="{$admin_goto}Product&{$token_request}" title="Добавить товар">
                добавить
            </a>
        </div>



        {* <!-- информационное сообщение --> *}
        {if $message|default:'' != ''}
            <div class="message">
                {$message}
            </div>
        {/if}



        {* <!-- сообщение об ошибке --> *}
        {if $error|default:'' != ''}
            <div class="error">
                <b>Ошибка:</b> {$error}
            </div>
        {/if}



        {* <!-- форма со списком записей --> *}
        <form action="{$admin_goto}Products" id="items_form" method="post" onkeypress="return Ignore_KeypressSubmit(event);">



            {* <!-- фильтр --> *}
            <table align="center" cellpadding="0" cellspacing="8" class="white">
                <tr>

                    {* <!-- поле Категория --> *}
                    <td class="param_short">
                        Категория
                    </td>
                    <td class="value" width="50%" title="Фильтр: только принадлежащие такой категории">

                        {* <!-- селектор категорий --> *}
                        {$param = $smarty.const.REQUEST_PARAM_NAME_FILTER_CATEGORY|default:''}
                        <select class="thin" id="items_form_{$param|escape}" name="{$param|escape}" onchange="Start_PageRecordsFilter('items_form');">
                            <option value=""></option>

                            {* <!-- список категорий --> *}
                            {include file = '../../common_parts/categories.htm'
                                     items = $categories|default:false
                                     currents = $inputs[$param]|default:0
                                     selector = true}
                        </select>
                    </td>



                    {* <!-- поле Искомая строка --> *}
                    <td class="param_short">
                        Поиск:
                    </td>
                    <td class="value" colspan="3" width="50%" title="Фильтр: с таким словом в названии товара, таким артикулом или буквенным кодом (не более 4 слов, слова менее 3 символов игнорируются)">
                        {filter_editbox param = 'REQUEST_PARAM_NAME_FILTER_SEARCH'}

                        {* <!-- варианты значения --> *}
                        <div class="value-variants">
                            <span onclick="jQuery(this).closest('.value').find('input').val('');">
                                <span>текст = с таким словом в названии, артикуле, буквенном коде</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_TAG|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>[тег] = помеченные таким тегом</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_TAG_KEYWORDS|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>[тег] = помеченные таким тегом или meta keywords</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_KEYWORDS|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>[тег] = помеченные таким meta keywords</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_PRODUCT_CODE|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>[код или *] = товар с таким буквенным кодом</span>
                            </span>

                            <span onclick="jQuery(this).closest('.value').find('input').val('sku:');">
                                sku:<span>[артикул или *] = товар с таким артикулом</span>
                            </span>
                            <span onclick="jQuery(this).closest('.value').find('input').val('sku!');">
                                &nbsp; &nbsp; &nbsp; sku!<span>[артикул] = все товары, кроме такого артикула</span>
                            </span>
                            <span onclick="jQuery(this).closest('.value').find('input').val('sku^');">
                                &nbsp; &nbsp; &nbsp; sku^<span>начало = все с таким началом артикула</span>
                            </span>
                            <span onclick="jQuery(this).closest('.value').find('input').val('sku~');">
                                &nbsp; &nbsp; &nbsp; sku~<span>часть = все с такой частью артикула</span>
                            </span>
                            <span onclick="jQuery(this).closest('.value').find('input').val('sku$');">
                                &nbsp; &nbsp; &nbsp; sku$<span>конец = все с таким окончанием артикула</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_PRODUCT_ID|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>ид = товар с таким идентификатором</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_BRAND|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>[название или *] = товары такого бренда</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_TEMPLATE|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>[имя_файла или *] = отрисовываемые таким шаблоном</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_MODIFIED_DATE|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>ГГГГ-ММ-ДД = измененные в такой день</span>
                            </span>

                            {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_CREATED_DATE|default:'')|escape}
                            <span onclick="jQuery(this).closest('.value').find('input').val('{$param}');">
                                {$param}<span>ГГГГ-ММ-ДД = созданные в такой день</span>
                            </span>

                            <span class="non-selectable last">
                                <span>
                                    В квадратных скобках указаны опциональные части,<br>
                                    без них смысл равен "не заполненные".<br>
                                </span>
                                <span>
                                    Знак * означает, что здесь с помощью символа звездочки<br>
                                    можно найти все заполненные каким-либо значением.
                                </span>
                            </span>
                        </div>
                    </td>
                    <td class="value_box" title="Начать поиск товаров по условиям фильтра">
                        <input class="submit" style="width: auto;" type="submit" value="&nbsp;Найти&nbsp;" />
                    </td>



                    {* <!-- пустая колонка для визуального отделения флажков фильтра --> *}
                    <td class="param_short" rowspan="4">
                        &nbsp;
                    </td>



                    {* <!-- флажок Хит продаж --> *}
                    <td class="param_short" title="Фильтр: только хиты продаж">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_HIT'
                                         shadow = false
                                         image = 'icon_hit_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок Акционный --> *}
                    <td class="param_short" title="Фильтр: только акционные товары">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_ACTIONAL'
                                         shadow = false
                                         image = 'icon_actional_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок Яндекс.Маркет --> *}
                    <td class="param_short" title="Фильтр: только разрешенные к экспорту в Яндекс.Маркет">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_YMARKET'
                                         shadow = false
                                         image = 'icon_ymarket_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>
                </tr>



                <tr>

                    {* <!-- поле Бренд --> *}
                    <td class="param_short">
                        Бренд
                    </td>
                    <td class="value" width="50%" title="Фильтр: только принадлежащие такому бренду">

                        {* <!-- селектор брендов --> *}
                        {$param = $smarty.const.REQUEST_PARAM_NAME_FILTER_BRAND|default:''}
                        <select class="thin" id="items_form_{$param|escape}" name="{$param|escape}" onchange="Start_PageRecordsFilter('items_form');">
                            <option value=""></option>

                            {* <!-- список брендов --> *}
                            {include file = '../../common_parts/brands.htm'
                                     items = $all_brands|default:false
                                     currents = $inputs[$param]|default:0
                                     selector = true}
                        </select>
                    </td>



                    {* <!-- поле Искомая цена --> *}
                    <td class="param_short">
                        Цена от:
                    </td>
                    <td class="value" width="25%" title="Фильтр: с ценой от такого значения (дробную часть отделяйте точкой)">
                        {filter_editbox param = 'REQUEST_PARAM_NAME_FILTER_SEARCHCOSTFROM'}
                    </td>
                    <td class="param_short">
                        до:
                    </td>
                    <td class="value" width="25%" title="Фильтр: с ценой до такого значения (дробную часть отделяйте точкой)">
                        {filter_editbox param = 'REQUEST_PARAM_NAME_FILTER_SEARCHCOSTTO'}
                    </td>



                    {* <!-- флажок Фильтр запускать вручную --> *}
                    <td class="param_short" title="Включить срабатывание фильтра только по нажатию клавиши 'Найти'">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_MANUALLY'
                                         shadow = true
                                         image = 'icon_manually_16x16.png'
                                         style = 'margin-right: 0px;'
                                         invertable = false}
                    </td>



                    {* <!-- флажок Новинки --> *}
                    <td class="param_short" title="Фильтр: только новинки">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_NEWEST'
                                         shadow = false
                                         image = 'icon_newest_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок Скоро в продаже --> *}
                    <td class="param_short" title="Фильтр: только ожидаемые скоро в продаже">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_AWAITED'
                                         shadow = false
                                         image = 'icon_awaited_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок ВКонтакте --> *}
                    <td class="param_short" title="Фильтр: только разрешенные к экспорту в ВКонтакте">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_VKONTAKTE'
                                         shadow = false
                                         image = 'icon_vkontakte_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>
                </tr>



                <tr id="items_form_filter_addon1" style="display: none;">

                    {* <!-- поле Раздел магазина --> *}
                    <td class="param_short">
                        Раздел
                    </td>
                    <td class="value" width="50%" title="Фильтр: только принадлежащие такому разделу сайта">

                        {* <!-- селектор разделов сайта --> *}
                        <select class="thin" id="items_form_{$smarty.const.REQUEST_PARAM_NAME_FILTER_SECTION|escape}" name="{$smarty.const.REQUEST_PARAM_NAME_FILTER_SECTION|escape}" onchange="Start_PageRecordsFilter('items_form');">
                            <option value=""></option>
                            <option value="1" {if $inputs[$param]|default:false} selected{/if}>
                                Основной
                            </option>
                        </select>
                    </td>



                    {* <!-- поле Склад --> *}
                    <td class="param_short">
                        Склад
                    </td>
                    <td class="value" colspan="4" width="50%" title="Фильтр: только находящиеся на таком складе">

                        {* <!-- селектор складов --> *}
                        <select class="thin" id="items_form_{$smarty.const.REQUEST_PARAM_NAME_FILTER_STOCK|escape}" name="{$smarty.const.REQUEST_PARAM_NAME_FILTER_STOCK|escape}" onchange="Start_PageRecordsFilter('items_form');">
                            <option value=""></option>
                            {if isset($stocks) && !empty($stocks)}
                                {foreach $stocks as $c}
                                    <option value="{$c->stock_id|default:''|escape}"{if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_FILTER_STOCK]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_FILTER_STOCK] == $c->stock_id|default:'')} selected{/if}>
                                        {$c->name|default:'Без названия!'|escape}
                                    </option>
                                {/foreach}
                            {/if}
                        </select>
                    </td>



                    {* <!-- флажок Обсуждаемый --> *}
                    <td class="param_short" title="Фильтр: только разрешенные комментировать">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_COMMENTED'
                                         shadow = false
                                         image = 'icon_commented_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок Не для экспорта --> *}
                    <td class="param_short" title="Фильтр: только запрещенные в информерах">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_NOTEXPORT'
                                         shadow = false
                                         image = 'icon_notexport_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок Не для RSS --> *}
                    <td class="param_short" title="Фильтр: только запрещенные в RSS">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_NOTRSS'
                                         shadow = false
                                         image = 'icon_notrss_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>
                </tr>



                <tr id="items_form_filter_addon2" style="display: none;">

                    {* <!-- поле Меню --> *}
                    <td class="param_short">
                        Меню
                    </td>
                    <td class="value" width="50%" title="Фильтр: только принадлежащие такому меню сайта">

                        {* <!-- селектор меню сайта --> *}
                        <select class="thin" id="items_form_{$smarty.const.REQUEST_PARAM_NAME_FILTER_MENU|escape}" name="{$smarty.const.REQUEST_PARAM_NAME_FILTER_MENU|escape}" onchange="Start_PageRecordsFilter('items_form');">
                            <option value=""></option>
                            {if isset($menus)}
                                {foreach $menus as $c}
                                    <option value="{$c->menu_id|default:''|escape}"{if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_FILTER_MENU]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_FILTER_MENU] == $c->menu_id|default:'')} selected{/if}>
                                        {$c->name|default:'Без названия!'|escape}
                                    </option>
                                {/foreach}
                            {/if}
                        </select>
                    </td>



                    {* <!-- поле Поставщик --> *}
                    <td class="param_short">
                        Поставщик
                    </td>
                    <td class="value" colspan="4" width="50%" title="Фильтр: только товары такого поставщика">

                        {* <!-- селектор пользователей --> *}
                        {$param = $smarty.const.REQUEST_PARAM_NAME_FILTER_USER|default:''}
                        <select class="thin" id="items_form_{$param|escape}" name="{$param|escape}" onchange="Start_PageRecordsFilter('items_form');">
                            <option value=""></option>
                            <option value="0"{if isset($inputs[$param]) && ($inputs[$param] == "0")} selected{/if}>
                                [наша поставка]
                            </option>

                            {* <!-- список клиентов --> *}
                            {include file = '../../common_parts/users.htm'
                                     items = $all_users
                                     currents = $inputs[$param]|default:0
                                     selector = true}
                        </select>
                    </td>



                    {* <!-- флажок Со статьями --> *}
                    <td class="param_short" title="Фильтр: только со связанными статьями">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_ARTICLED'
                                         shadow = false
                                         image = 'icon_articled_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С новостями --> *}
                    <td class="param_short" title="Фильтр: только со связанными новостями">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_NEWSED'
                                         shadow = false
                                         image = 'icon_newsed_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С субдоменом --> *}
                    <td class="param_short" title="Фильтр: только имеющие субдомен">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_DOMAINED'
                                         shadow = false
                                         image = 'icon_domained_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>
                </tr>
            </table>



            {* <!-- сортировщик --> *}
            <table align="center" cellpadding="0" cellspacing="8" class="gray" style="margin-top: 0px; margin-bottom: 0px;">
                <tr>
                    <td class="param_short">
                        упорядочить&nbsp;
                    </td>



                    {* <!-- флажок Направление сортировки --> *}
                    <td class="param_short" title="Включить обратный порядок сортировки (игнорируется при упорядочении 'Как расставлены')">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_SORT_DIRECTION'
                                         shadow = true
                                         image = 'icon_descending_16x16.png'
                                         style = ''
                                         invertable = false}
                    </td>



                    {* <!-- флажок Лаконичный режим --> *}
                    <td class="param_short" title="Включить лаконичный режим сортировки (прятать нецелевые записи)">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_SORT_LACONICAL'
                                         shadow = true
                                         image = 'icon_laconical_16x16.png'
                                         style = ''
                                         invertable = false}
                    </td>



                    {* <!-- поле Способ сортировки --> *}
                    <td class="value" width="40%" title="Способ сортировки товаров в нижеследующем списке">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_SORT|default:''}
                        {$now_value = $inputs[$param]|default:''}
                        <select class="thin" name="{$param|escape}" onchange="Start_PageRecordsFilter('items_form');">

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_AS_IS|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                как расставлены
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_NAME|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по алфавиту
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_PCODE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по буквенному коду
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_PRICE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по цене
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_TEMPPRICE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по акционной цене
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_OLDPRICE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по старой цене
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_PRIORITYDISCOUNT|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по приоритетной скидке
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_QUANTITY|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по наличию
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_PRICE_QUANTITY|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по цене + наличию
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_QUANTITY_PRICE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по наличию + цене
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_VARIANTSCOUNT|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по числу вариантов
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_ACTION_START_DATE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по дате начала акции
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_ACTION_END_DATE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по дате окончания акции
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_CREATED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по дате добавления
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_MODIFIED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по дате исправления
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_ORDERED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по дате последней покупки
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_ORDERSCOUNT|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по числу покупок
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по дате последнего отзыва
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTS|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по числу отзывов
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_BROWSED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по числу просмотров
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_VOTES|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по числу голосов
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_RATING|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по рейтингу
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_CATEGORY|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по категориям
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_BRAND|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по брендам
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_URL|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по url (адресу страницы товара)
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_MENU|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по меню
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_OBJECTS|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по подключаемым плагинам
                            </option>

                            {$value = $smarty.const.SORT_PRODUCTS_MODE_BY_USER|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                по поставщикам
                            </option>
                        </select>
                    </td>



                    {* <!-- поле Тип товаров --> *}
                    <td class="value" width="35%" title="С каким типом товаров производится работа">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_TYPE|default:''}
                        {$now_value = $inputs[$param]|default:''}
                        <select class="thin" name="{$param|escape}" onchange="Start_PageRecordsFilter('items_form');">

                            {$value = $smarty.const.TYPE_PRODUCTS_ANY|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                любые товары
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_HIT|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                хиты продаж
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_NEWEST|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                новинки
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_ACTIONAL|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                акционные
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_AWAITED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                скоро в продаже
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_ORDERED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                покупавшиеся
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_COMMENTED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                обсуждавшиеся
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_NONUSABLE|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                не для продажи
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_DOMAINED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                на своем субдомене
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_TEMPLATED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                на своем шаблоне
                            </option>

                            {$value = $smarty.const.TYPE_PRODUCTS_CANONIZED|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                канонизированные
                            </option>
                        </select>
                    </td>



                    {* <!-- поле Режим отображения --> *}
                    <td class="value" width="25%" title="Насколько полно выводить информацию о товарах в списке">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_VIEW_MODE|default:''}
                        {$now_value = $inputs[$param]|default:''}
                        <select class="thin" name="{$param|escape}" onchange="Start_PageRecordsFilter('items_form');">

                            {$value = $smarty.const.VIEW_MODE_COMPACT|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                компактно
                            </option>

                            {$value = $smarty.const.VIEW_MODE_STANDARD|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                стандартно
                            </option>

                            {$value = $smarty.const.VIEW_MODE_FULL|default:''}
                            <option value="{$value|escape}"{if $now_value == $value} selected{/if}>
                                подробно
                            </option>
                        </select>
                    </td>



                    {* <!-- флажок Скрыт --> *}
                    <td class="param_short" title="Фильтр: только скрытые от незарегистрированных пользователей">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_HIDDEN'
                                         shadow = false
                                         image = 'icon_hidden_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок Разрешен --> *}
                    <td class="param_short" title="Фильтр: только разрешенные к показу на сайте">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_ENABLED'
                                         shadow = false
                                         image = 'icon_enabled_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С картинками --> *}
                    <td class="param_short" title="Фильтр: только загружавшиеся изображениями">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_IMAGED'
                                         shadow = false
                                         image = 'icon_imaged_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С файлами --> *}
                    <td class="param_short" title="Фильтр: только загружавшиеся файлами">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_FILED'
                                         shadow = false
                                         image = 'icon_filed_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С SEO текстом --> *}
                    <td class="param_short" title="Фильтр: только с SEO текстом">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_SEOED'
                                         shadow = false
                                         image = 'icon_seoed_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С особым URL --> *}
                    <td class="param_short" title="Фильтр: только с особым URL">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_URLSPECIAL'
                                         shadow = false
                                         image = 'icon_urlspecial_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>



                    {* <!-- флажок С плагинами --> *}
                    <td class="param_short" title="Фильтр: только с подключаемыми плагинами">
                        {filter_checkbox param = 'REQUEST_PARAM_NAME_FILTER_OBJECTED'
                                         shadow = false
                                         image = 'icon_objected_gray_16x16.png'
                                         style = ''
                                         invertable = true}
                    </td>
                </tr>
            </table>



            {* <!-- кнопка сброса фильтра --> *}
            <div class="toolkey">
                <span>
                    найдено <span>
                                {($total_items|default:0)|string_format:'%d'} шт.
                            </span>
                </span>

                <a href="#" onclick="return Switch_PageElements('items_form_filter_addon1,items_form_filter_addon2');" title="Развернуть / свернуть фильтр">
                    фильтр
                </a>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <a href="#" onclick="return Reset_PageRecordsFilter('items_form');" title="Сбросить фильтр (кроме способа упорядочения, типа товаров и полноты вывода)">
                    сбросить
                </a>
            </div>



            {* <!-- если получен непустой массив записей --> *}
            {if isset($items) && is_array($items) && !empty($items)}



                {* <!-- навигатор страниц, только если есть несколько листаемых страниц --> *}
                {if ($Pages|default:null)|@count > 1}
                    {$PagesNavigation|default:''}
                {/if}



                {* <!-- определяем переменную тега, закрывающего контейнер перетаскиваемых элементов --> *}
                {$items_container_close_tag = ''}



                {* <!-- если выбрана сортировка "как расставлены" и работаем с типом товаров Хиты/Новинки/Акционные/Скоро в продаже --> *}
                {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $sort_as_is)}
                    {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_HIT) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_NEWEST) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_ACTIONAL) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_AWAITED))}

                        {* <!-- заключаем перетаскиваемые элементы списка в контейнер --> *}
                        {$items_container_close_tag}
                        <div id="items_container">

                        {* <!-- назначаем тег, закрывающий контейнер перетаскиваемых элементов --> *}
                        {$items_container_close_tag = '</div>'}
                    {/if}
                {/if}



                {$now_category_id = ''}
                {$now_brand_id = ''}
                {$now_user_id = ''}
                {$now_menu = false}
                {foreach name = items item = c from = $items}

                    {* <!-- запоминаем идентификатор текущей записи --> *}
                    {$id = $c->product_id|default:0}



                    {* <!-- визуальное выделение принадлежности к меню --> *}
                    {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_MENU)}
                        {$value = $c->menu|default:'Без названия!'}
                        {if $now_menu !== $value}
                            {$now_menu = $value}
                            <li class="head_divider">
                                <div>
                                    {if $value != ''}
                                        {$value|escape}
                                    {else}
                                        Вне любого меню
                                    {/if}
                                </div>
                            </li>
                        {/if}
                    {/if}



                    {* <!-- визуальное выделение принадлежности к поставщику --> *}
                    {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_USER)}
                        {if isset($users_list)}
                            {$value = $c->user_id|default:0}
                            {if ($value != 0) && ($users_list[$value]->compound_name|default:'' == '')}
                                {$value = 0}
                            {/if}
                            {if $now_user_id !== $value}
                                {$now_user_id = $value}
                                <li class="head_divider">
                                    <div>
                                        {if $now_user_id != 0}
                                            {$users_list[$now_user_id]->compound_name|default:'Без имени!'|escape}
                                        {else}
                                            Наша поставка
                                        {/if}
                                    </div>
                                </li>
                            {/if}
                        {/if}
                    {/if}



                    {* <!-- визуальное выделение принадлежности к бренду --> *}
                    {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_BRAND)}
                        {if isset($brands_list)}
                            {$value = $c->brand_id|default:0}
                            {if ($value != 0) && ($brands_list[$value]->name|default:'' == '')}
                                {$value = 0}
                            {/if}
                            {if $now_brand_id !== $value}
                                {$now_brand_id = $value}
                                <li class="head_divider">
                                    <div>
                                        {if $now_brand_id != 0}
                                            <span class="path" title="Полный путь этой ветви бренда">
                                                {foreach name=path item=p from=$brands_list[$now_brand_id]->path}
                                                    {$p->name|default:'Без названия!'|escape}
                                                    {if !$smarty.foreach.path.last} → {/if}
                                                {/foreach}
                                            </span>
                                            {$brands_list[$now_brand_id]->name|default:'Без названия!'|escape}
                                        {else}
                                            Без бренда
                                        {/if}
                                    </div>
                                </li>
                            {/if}
                        {/if}
                    {/if}



                    {* <!-- визуальное выделение принадлежности к категории --> *}
                    {if isset($categories_list)}
                        {$value = $c->category_id|default:0}
                        {if ($value != 0) && ($categories_list[$value]->name|default:'' == '')}
                            {$value = 0}
                        {/if}
                        {if $now_category_id !== $value}
                            {$now_category_id = $value}

                            <li class="divider">
                                <div>
                                    {if $now_category_id != 0}
                                        <span class="path" title="Полный путь этой ветви категории">
                                            {capture assign="temp_category_path"}
                                                {foreach name=path item=p from=$categories_list[$now_category_id]->path}
                                                    {$p->name|default:'Без названия!'|escape}
                                                    {if !$smarty.foreach.path.last} → {/if}
                                                {/foreach}
                                            {/capture}
                                            {$temp_category_path}
                                        </span>
                                        {$categories_list[$now_category_id]->name|default:'Без названия!'|escape}
                                    {else}
                                        Без категории
                                    {/if}
                                </div>
                            </li>



                            {* <!-- если выбрана сортировка "как расставлены" и работаем не типом товаров Хиты/Новинки/Акционные/Скоро в продаже --> *}
                            {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $sort_as_is)}
                                {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE]) || (($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] != $smarty.const.TYPE_PRODUCTS_HIT) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] != $smarty.const.TYPE_PRODUCTS_NEWEST) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] != $smarty.const.TYPE_PRODUCTS_ACTIONAL) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] != $smarty.const.TYPE_PRODUCTS_AWAITED))}

                                    {* <!-- заключаем перетаскиваемые элементы списка в контейнер --> *}
                                    {$items_container_close_tag}
                                    <div id="items_container">

                                    {* <!-- назначаем тег, закрывающий контейнер перетаскиваемых элементов --> *}
                                    {$items_container_close_tag = '</div>'}
                                {/if}
                            {/if}
                        {/if}
                    {/if}



                    {$subclass = ($c->non_usable|default:false) ? ' non_usable' : ''}



                    <li class="flatlist{$subclass}">



                        {* <!-- флажки Пометить все на удаление / Снять все --> *}
                        {if $smarty.foreach.items.iteration == 1}
                            <a href="{$admin_script}" title="Пометить на удаление все на этой странице" onclick="jQuery(this).closest('form').find('li > div > input.delete_items').each(function () { if (!this.checked) this.click(); this.onchange(); }); return false;" style="font-size: 12pt; position: absolute; margin: -4px 0px 0px 882px; z-index: 1;">
                                ↓
                            </a>
                            <a href="{$admin_script}" title="Снять пометки на удаление со всех на этой странице" onclick="jQuery(this).closest('form').find('li > div > input.delete_items').each(function () { if (this.checked) this.click(); this.onchange(); }); return false;" style="font-size: 12pt; position: absolute; margin: -4px 0px 0px 890px; z-index: 1;">
                                ↑
                            </a>



                            {* <!-- если включен стандартный или полный вывод информации о записях --> *}
                            {$param = $smarty.const.REQUEST_PARAM_NAME_VIEW_MODE|default:''}
                            {if ($inputs[$param]|default:false == $smarty.const.VIEW_MODE_STANDARD|default:false)
                            || ($inputs[$param]|default:false == $smarty.const.VIEW_MODE_FULL|default:false)}



                                {* <!-- определяем сдвиг флажков (при сортировке "как расставлены" и все остальные) --> *}
                                {$param = $smarty.const.REQUEST_PARAM_NAME_SORT|default:''}
                                {$value = ($inputs[$param]|default:false == $sort_as_is) ? 668 : 817}

                                {* <!-- флажки Пометить все разрешенными / Снять все --> *}
                                <a href="{$admin_script}" title="Пометить разрешенными все на этой странице" onclick="jQuery(this).closest('form').find('li > div > input.enable_items').each(function () { if (!this.checked) this.click(); this.onchange(); }); return false;" style="font-size: 12pt; position: absolute; margin: -4px 0px 0px {$value}px; z-index: 1;">
                                    ↓
                                </a>
                                <a href="{$admin_script}" title="Снять пометки разрешенных со всех на этой странице" onclick="jQuery(this).closest('form').find('li > div > input.enable_items').each(function () { if (this.checked) this.click(); this.onchange(); }); return false;" style="font-size: 12pt; position: absolute; margin: -4px 0px 0px {$value + 7}px; z-index: 1;">
                                    ↑
                                </a>
                            {/if}
                        {/if}

                        {* <!-- флажок Пометить на удаление --> *}
                        <div class="onerow">
                            <input class="checkbox delete_items" name="delete_items[]" title="Пометить на удаление" type="checkbox" value="{$id|escape}" onchange="Toggle_LiTransparency(this, !this.checked, 0.3); Check_DeleteSelected_Button();" />

                            {* <!-- кнопка Удалить --> *}
                            <a href="{$admin_script}{$c->delete_get|default:''|escape}" title="Удалить" onclick="return confirm('Данная запись будет удалена с сайта. Вы подтверждаете такую операцию?');">
                                <img class="microkey_right" src="{$admin_theme}images/icon_delete_16x16.png" />
                            </a>

                            {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $sort_as_is)}
                                {$temp_num = $c->order_num|default:0}
                                {$temp_string = 'в ветке '}
                                {$temp_suffix = ''}

                                {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_HIT)}
                                    {$temp_num = $c->order_num_hit|default:0}
                                    {$temp_string = ''}
                                    {$temp_suffix = '_hit'}
                                {/if}
                                {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_NEWEST)}
                                    {$temp_num = $c->order_num_newest|default:0}
                                    {$temp_string = ''}
                                    {$temp_suffix = '_newest'}
                                {/if}
                                {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_ACTIONAL)}
                                    {$temp_num = $c->order_num_actional|default:0}
                                    {$temp_string = ''}
                                    {$temp_suffix = '_actional'}
                                {/if}
                                {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_TYPE] == $smarty.const.TYPE_PRODUCTS_AWAITED)}
                                    {$temp_num = $c->order_num_awaited|default:0}
                                    {$temp_string = ''}
                                    {$temp_suffix = '_awaited'}
                                {/if}

                                {* <!-- если включен стандартный или полный вывод информации о записях --> *}
                                {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_STANDARD) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL))}

                                    <div class="order_edit" title="Текущий вес {$temp_string}">
                                        <input id="order_num" name="order_num{$temp_suffix}[{$id|escape}]" type="text" value="{$temp_num|escape}" onchange="Show_AcceptChanges_Button();">
                                    </div>

                                {else}

                                    {* <!-- скрытое поле порядкового номера текущей записи --> *}
                                    <input id="order_num" name="order_num{$temp_suffix}[{$id|escape}]" type="hidden" value="{$temp_num|escape}" />

                                    {* <!-- скрытое постинговое идентифицирующее поле текущей записи --> *}
                                    <input name="{$smarty.const.REQUEST_PARAM_NAME_POST|escape}[{$id|escape}]" type="hidden" value="" />
                    
                                    <img class="microkey_left" src="{$admin_theme}images/placeholder.gif" />
                                {/if}

                                <a href="{$admin_script}{$c->move_first_get|default:''|escape}" title="Поставить первым {$temp_string}(текущий вес {$temp_num|escape})">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_move_first_16x16.png" />
                                </a>
                                <a href="{$admin_script}{$c->move_up_get|default:''|escape}" title="Поднять выше {$temp_string}(текущий вес {$temp_num|escape})">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_move_up_16x16.png" />
                                </a>
                                <a href="{$admin_script}{$c->move_down_get|default:''|escape}" title="Опустить ниже {$temp_string}(текущий вес {$temp_num|escape})">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_move_down_16x16.png" />
                                </a>
                                <a href="{$admin_script}{$c->move_last_get|default:''|escape}" title="Поставить последним {$temp_string}(текущий вес {$temp_num|escape})">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_move_last_16x16.png" />
                                </a>
                            {/if}

                            <img class="microkey_left" src="{$admin_theme}images/placeholder.gif" />

                            {* <!-- если включен стандартный или полный вывод информации о записях --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_STANDARD) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL))}
                                <input class="checkbox gray enable_items" name="enabled[{$id|escape}]"{if $c->enabled|default:false} checked{/if} title="Пометить как разрешенный к показу на сайте" type="checkbox" value="1" onchange="Show_AcceptChanges_Button();">
                            {/if}

                            <a href="{$admin_script}{$c->enable_get|default:''|escape}" title="Разрешить / запретить показ на сайте">
                                <img class="microkey_left" src="{$admin_theme}images/icon_enabled{if !$c->enabled|default:false}_off{/if}_16x16.png" />
                            </a>

                            {* <!-- если включен полный вывод информации о записях --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL)}

                                <a href="{$admin_script}{$c->domained_get|default:''|escape}" title="Разрешить / запретить собственный субдомен">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_domained{if !$c->subdomain_enabled|default:false}_off{/if}_16x16.png" />
                                </a>
                                <a href="{$admin_script}{$c->hidden_get|default:''|escape}" title="Скрыть / открыть для незарегистрированных пользователей">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_hidden{if !$c->hidden|default:false}_off{/if}_16x16.png" />
                                </a>
                                <a href="{$admin_script}{$c->commented_get|default:''|escape}" title="Разрешить / запретить комментирование">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_commented{if !$c->commented|default:false}_off{/if}_16x16.png" />
                                </a>
                                <img class="microkey_left" src="{$admin_theme}images/placeholder.gif" />
                            {/if}

                            <a href="{$admin_script}{$c->awaited_get|default:''|escape}" title="Установить / снять признак 'Скоро в продаже'">
                                <img class="microkey_left" src="{$admin_theme}images/icon_awaited{if !$c->awaited|default:false}_off{/if}_16x16.png" />
                            </a>
                            <a href="{$admin_script}{$c->actional_get|default:''|escape}" title="Установить / снять признак 'Акционный'">
                                <img class="microkey_left" src="{$admin_theme}images/icon_actional{if !$c->actional|default:false}_off{/if}_16x16.png" />
                            </a>
                            <a href="{$admin_script}{$c->newest_get|default:''|escape}" title="Установить / снять признак 'Новинка'">
                                <img class="microkey_left" src="{$admin_theme}images/icon_newest{if !$c->newest|default:false}_off{/if}_16x16.png" />
                            </a>
                            <a href="{$admin_script}{$c->hit_get|default:''|escape}" title="Установить / снять признак 'Хит продаж'">
                                <img class="microkey_left" src="{$admin_theme}images/icon_hit{if !$c->hit|default:false}_off{/if}_16x16.png" />
                            </a>

                            {* <!-- если включен полный вывод информации о записях --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL)}
                                <a href="{$admin_script}{$c->vkontakte_get|default:''|escape}" title="Разрешить / запретить экспорт в ВКонтакте">
                                    <img class="microkey_left" src="{$admin_theme}images/icon_vkontakte{if !$c->vkontakte|default:false}_off{/if}_16x16.png" />
                                </a>
                                <a href="{$admin_script}{$c->ymarket_get|default:''|escape}" title="Разрешить / запретить экспорт в Яндекс.Маркет">
                                    {$value = $c->ymarket|default:0 & 1}
                                    <img class="microkey_left" src="{$admin_theme}images/icon_ymarket{if !$value}_off{/if}_16x16.png" />
                                </a>
                            {/if}

                            <img class="microkey_left" src="{$admin_theme}images/placeholder.gif" />
                            <a href="{$admin_script}{$c->copy_get|default:''|escape}" title="Создать и редактировать копию товара">
                                <img class="microkey_left" src="{$admin_theme}images/icon_edit_16x16.png" />
                            </a>
                            <img class="microkey_left" src="{$admin_theme}images/placeholder.gif" />

                            {* <!-- мониторинг цены --> *}
                            <span class="monitoring">
                                <a class="ajax" href="{siteAdmin}?section=PriceMonitoring">
                                    Rozetka.ua
                                    <param name="scan_product" value="1" />
                                    <param name="filter_target" value="rozetka" />
                                    <param name="filter_product" value="{$id|escape}" />
                                </a>
                                <a class="ajax" href="{siteAdmin}?section=PriceMonitoring">
                                    Hotline.ua
                                    <param name="scan_product" value="1" />
                                    <param name="filter_target" value="hotline" />
                                    <param name="filter_product" value="{$id|escape}" />
                                </a>
                                <a class="ajax" href="{siteAdmin}?section=PriceMonitoring">
                                    Price.ua
                                    <param name="scan_product" value="1" />
                                    <param name="filter_target" value="priceua" />
                                    <param name="filter_product" value="{$id|escape}" />
                                </a>
                                <a class="ajax" href="{siteAdmin}?section=PriceMonitoring">
                                    Яндекс.Маркет
                                    <param name="scan_product" value="1" />
                                    <param name="filter_target" value="yandex" />
                                    <param name="filter_product" value="{$id|escape}" />
                                </a>
                                <img class="microkey_left" src="{themeAdmin}images/icon_import_16x16.png" title="Мониторить цену" />
                            </span>

                            {* <!-- нумерация --> *}
                            <span class="topic" style="display: inline;">
                                {if isset($CurrentPage)}
                                    {$smarty.foreach.items.iteration + $CurrentPage * $CurrentPageMaxsize}.
                                {else}
                                    {$smarty.foreach.items.iteration}.
                                {/if}
                            </span>

                            {* <!-- количество комментариев --> *}
                            <span class="count" title="Количество отзывов: {$c->product_comments_count|default:0|escape}">
                                {$c->product_comments_count|default:0|escape}
                            </span>

                            {* <!-- если включен стандартный или полный вывод информации о записях --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_STANDARD) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL))}

                                {* <!-- скрытое постинговое идентифицирующее поле текущей записи --> *}
                                <input name="{$smarty.const.REQUEST_PARAM_NAME_POST|escape}[{$id|escape}]" type="hidden" value="">

                                {* <!-- количество просмотров --> *}
                                <span class="browsed{if $c->browsed|default:0 == 0} zero{/if}" title="Количество просмотров: {$c->browsed|default:0|escape}">
                                    {$c->browsed|default:0|escape}
                                </span>

                                {* <!-- если сортировка по рейтингу или количеству голосов --> *}
                                {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_VOTES) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_RATING))}

                                    {* <!-- количество голосов --> *}
                                    <span class="votes{if $c->votes|default:0 == 0} zero{/if}" title="Количество голосов: {$c->votes|default:0|escape}">
                                        {$c->votes|default:0|escape}
                                    </span>

                                    {* <!-- рейтинг --> *}
                                    {if $c->votes|default:0 != 0}
                                        <span class="rating{if (($c->rating|default:0) / $c->votes)|string_format:'%1.2f'|replace:',':'.' == 0} zero{/if}" title="Рейтинг: {(($c->rating|default:0) / $c->votes)|string_format:'%1.2f'|replace:',':'.'}">
                                            {(($c->rating|default:0) / $c->votes)|string_format:"%1.2f"|replace:",":"."}
                                        </span>
                                    {else}
                                        <span class="rating{if $c->rating|default:0 == 0} zero{/if}" title="Рейтинг: {($c->rating|default:0)|string_format:'%1.2f'|replace:',':'.'}">
                                            {($c->rating|default:0)|string_format:'%1.2f'|replace:',':'.'}
                                        </span>
                                    {/if}
                                {/if}
                            {/if}

                            {* <!-- значок использования динамически подключаемых плагинов --> *}
                            {if $c->objects|default:'' != ''}
                                <img class="icon16x16" src="{$admin_theme}images/icon_objected_16x16.png" title="Содержит подключаемые плагины: {$c->objects|default:''|escape}" />
                            {/if}

                            {* <!-- название --> *}
                            <a href="{$admin_script}{$c->edit_get|default:''|escape}" title="{if isset($temp_category_path)}{$temp_category_path} → {/if}{$c->model|default:'Без названия!'|strip_tags|escape}{if $c->pcode|default:'' != ''} (буквенный код: {$c->pcode|default:''|escape}){/if}"{if !$c->enabled|default:false} class="disabled_item"{/if}>
                                {if $c->highlighted|default:false}<b>{/if}
                                    {$c->model|default:'Без названия!'|strip_tags|escape}
                                {if $c->highlighted|default:false}</b>{/if}
                            </a>
                        </div>



                        {* <!-- краткая информация --> *}

                        {* <!-- если включен стандартный или полный вывод информации о записях --> *}
                        {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_STANDARD) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL))}

                            {* <!-- цены вариантов --> *}
                            {foreach name=v item=v from=$c->variants}

                                {if $smarty.foreach.v.first}

                                    {$image = ''}
                                    {if isset($c->small_image)}
                                        {$image = $c->small_image|default:''}
                                    {/if}
                                    {if $image == '' && isset($c->large_image)}
                                        {$image = $c->large_image|default:''}
                                    {/if}
                                    {if $image == '' && !empty($c->images)}
                                        {foreach $c->images as $i => $f}
                                            {if !empty($c->images_thumbs[$i])}
                                                {$f = $c->images_thumbs[$i]}
                                            {/if}
                                            {if !empty($f)}
                                                {capture assign=image}
                                                    {if $f|truncate:7:'':true|lower != 'http://'}
                                                        {$site}{$settings->products_files_folder_prefix|default:''}files/products/
                                                    {/if}
                                                    {$f}
                                                {/capture}
                                                {break}
                                            {/if}
                                        {/foreach}
                                    {/if}
                                    {if $image == '' && !empty($c->fotos)}
                                        {foreach $c->fotos as $f}
                                            {if !empty($f->filename)}
                                                {$image = $f->filename}
                                                {break}
                                            {/if}
                                        {/foreach}
                                    {/if}

                                    {$temp_no_image = true}
                                    {if $image == ''}
                                        {$description = $c->description|default:''}
                                        {$image = $description|regex_replace:'/^.*?<img[^>]+?src=([^>\s]+).+$/is':'\1'}
                                        {if $image == $description}
                                            {$description = $c->body|default:''}
                                            {$image = $description|regex_replace:'/^.*?<img[^>]+?src=([^>\s]+).+$/is':'\1'}
                                            {if $image == $description}
                                                {$image = ''}
                                            {/if}
                                        {/if}
                                        {if $image == ""}
                                            {capture assign="image"}"{$theme}images/no_foto.jpg"{/capture}
                                        {/if}
                                    {else}
                                        {$temp_no_image = false}
                                        {capture assign="image"}"{if $image|truncate:7:'':true|lower != 'http://'}{$site}{/if}{$image|escape}"{/capture}
                                    {/if}

                                    {* <!-- изображение --> *}
                                    <img class="thumb{if $temp_no_image == true} thumb_no_product thumb_leftshift" title="У товара нет фотографии{else} thumb_leftshift{/if}" src={$image} />

                                {/if}

                                <div class="line" style="padding-top: 9px;">
                                    <span>
                                        {if $smarty.foreach.v.first}
                                            {$v->sku|default:"цена:"}
                                        {else}
                                            {$v->sku|default:"&nbsp;"}
                                        {/if}
                                    </span>
                                    <div class="price_edit" title="Основная цена товара">
                                        <input name="previous_variant_price[{$id|escape}][{$smarty.foreach.v.iteration}]" type="hidden" value="{($v->price*$currency->rate_from/$currency->rate_to)|string_format:'%1.2f'|replace:',':'.'|escape}">
                                        <input name="variant_price[{$id|escape}][{$smarty.foreach.v.iteration}]" type="text" value="{($v->price*$currency->rate_from/$currency->rate_to)|string_format:'%1.2f'|replace:',':'.'|escape}" onchange="Show_AcceptChanges_Button();">
                                    </div>
                                    <div class="price_edit price_edit_oldprice" title="Старая цена товара">
                                        <input name="variant_old_price[{$id|escape}][{$smarty.foreach.v.iteration}]" type="text" value="{if $v->old_price > 0}{($v->old_price*$currency->rate_from/$currency->rate_to)|string_format:'%1.2f'|replace:',':'.'|escape}{/if}" onchange="Show_AcceptChanges_Button();">
                                    </div>
                                    <div class="price_edit price_edit_actional" title="Акционная цена товара">
                                        <input name="previous_variant_temp_price[{$id|escape}][{$smarty.foreach.v.iteration}]" type="hidden" value="{if $v->temp_price > 0}{($v->temp_price*$currency->rate_from/$currency->rate_to)|string_format:'%1.2f'|replace:',':'.'|escape}{else}0.00{/if}">
                                        <input name="variant_temp_price[{$id|escape}][{$smarty.foreach.v.iteration}]" type="text" value="{if $v->temp_price > 0}{($v->temp_price*$currency->rate_from/$currency->rate_to)|string_format:'%1.2f'|replace:',':'.'|escape}{/if}" onchange="Show_AcceptChanges_Button();">
                                    </div>

                                    {* <!-- валюта --> *}
                                    {if !empty($v->currency_id) && $v->currency_id != $currency->currency_id|default:0}
                                        <span class="label" title="У товара указана другая базовая валюта"><i class="notice">~</i> {sign}</span>
                                    {else}
                                        <span class="label">{sign}</span>
                                    {/if}
                                    <input name="variant_currency_id[{$id}][{$smarty.foreach.v.iteration}]" type="hidden" value="{inputValue from='v->currency_id'}" />

                                    <div class="discount_edit discount_edit_prioritydiscount" title="Приоритетная скидка на товар">
                                        <input name="variant_priority_discount[{$id|escape}][{$smarty.foreach.v.iteration}]" type="text" value="{if $v->priority_discount >= 0}{$v->priority_discount|string_format:'%1.2f'|replace:',':'.'|escape}{/if}" onchange="Show_AcceptChanges_Button();">
                                    </div>
                                    <span class="label">
                                        %
                                    </span>
                                    <div class="quantity_edit" title="Количество товара на складе">
                                        <input name="previous_variant_stock[{$id|escape}][{$smarty.foreach.v.iteration}]" type="hidden" value="{$v->stock|default:0|escape}">
                                        <input name="variant_stock[{$id|escape}][{$smarty.foreach.v.iteration}]" type="text" value="{$v->stock|escape}" onchange="Show_AcceptChanges_Button();">
                                    </div>
                                    <span class="label">
                                        шт.
                                    </span>
                                    {$v->name|escape|default:"&nbsp;"}
                                    <input name="variant_id[{$id|escape}][{$smarty.foreach.v.iteration}]" type="hidden" value="{if !isset($v->virtual)}{$v->variant_id|escape}{else}0{/if}">
                                    <input name="variant_used[{$id|escape}][{$smarty.foreach.v.iteration}]" type="hidden" value="1">
                                </div>
                            {/foreach}

                        {/if}



                        {* <!-- если включен полный вывод информации о записях --> *}
                        {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_VIEW_MODE] == $smarty.const.VIEW_MODE_FULL)}

                            {* <!-- срок отправки --> *}
                            {if $c->shippings_term|default:'' != ''}
                                <div class="line" title="Срок отправки: {$c->shippings_term|default:''|escape}">
                                    <span>
                                        отправка:
                                    </span>
                                    {$c->shippings_term|default:''|escape}
                                </div>
                            {/if}



                            {* <!-- буквенный код --> *}
                            {if $c->pcode|default:'' != ''}
                                <div class="line" title="Буквенный код товара: {$c->pcode|default:''|escape}">
                                    <span>
                                        букв.код:
                                    </span>
                                    {$c->pcode|default:''|escape}
                                </div>
                            {/if}



                            {* <!-- запреты --> *}
                            {if isset($c->non_creditable) && $c->non_creditable
                            || isset($c->export_disabled) && $c->export_disabled
                            || isset($c->rss_disabled) && $c->rss_disabled}
                                <div class="line" title="Запреты">
                                    <span>
                                        запреты:
                                    </span>
                                    {if isset($c->non_creditable) && $c->non_creditable}
                                        <span class="text" style="color: inherit;">
                                            не в кредит
                                        </span>
                                    {/if}
                                    {if isset($c->export_disabled) && $c->export_disabled}
                                        <span class="subtext">
                                            не для экспорта
                                        </span>
                                    {/if}
                                    {if isset($c->rss_disabled) && $c->rss_disabled}
                                        <span class="subinfo">
                                            не для rss
                                        </span>
                                    {/if}
                                </div>
                            {/if}



                            {* <!-- меню --> *}
                            {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] != $smarty.const.SORT_PRODUCTS_MODE_BY_MENU)}
                                {if $c->menu|default:'' != ''}
                                    <div class="line" title="Расположен в меню: {$c->menu|default:''|escape}">
                                        <span>
                                            меню:
                                        </span>
                                        {$c->menu|default:''|escape}
                                    </div>
                                {/if}
                            {/if}



                            {* <!-- бренд --> *}
                            {if isset($brands_list) && !empty($c->brand_id) && (!isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] != $smarty.const.SORT_PRODUCTS_MODE_BY_BRAND))}
                                {$now_brand_id = $c->brand_id}
                                <div class="line" title="Бренд: {$brands_list[$now_brand_id]->name|escape}">
                                    <span>
                                        бренд:
                                    </span>
                                    {$brands_list[$now_brand_id]->name|escape}
                                </div>
                            {/if}



                            {* <!-- поставщик --> *}
                            {if isset($users_list) && !empty($c->user_id) && (!isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] != $smarty.const.SORT_PRODUCTS_MODE_BY_USER))}
                                {$now_user_id = $c->user_id}
                                <div class="line" title="Поставщик: {$users_list[$now_user_id]->compound_name|escape}">
                                    <span>
                                        поставщик:
                                    </span>
                                    {$users_list[$now_user_id]->compound_name|escape}
                                </div>
                            {/if}



                            {* <!-- теги --> *}
                            {$value = $c->tags|default:''}
                            {$value = preg_replace('/\s+/', ' ', $value)}
                            {$value = preg_replace('/\s*,\s*/', ',', $value)}
                            {$value = preg_replace('/,+/', ',', $value)}
                            {$value = trim($value, ' ,')}
                            {if $value != ''}
                                {$param = ($smarty.const.SEARCH_PRODUCTS_COMMAND_TAG|default:'')|escape}
                                <div class="line" title="Теги: {$value|escape}">
                                    <span>
                                        теги:
                                    </span>
                                    {$r = explode(',', $value|lower)}
                                    {$r2 = []}
                                    {foreach $r as $n}
                                        {if !isset($r[$n])}
                                            {$r[$n] = $n}
                                            {$n = $n|escape}
                                            <a href="{$admin_script}" onclick="return SearchThis_PageRecordsFilter('items_form', '{$param}{$n}');" title="Показать все товары, помеченные таким тегом">
                                                <img src="{$admin_theme}images/microicon_showall_9x9.png" />
                                            </a> &nbsp; {**}
                                            {$n} &nbsp; {**}
                                        {/if}
                                    {/foreach}
                                </div>
                            {/if}



                            {* <!-- дата добавления --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_CREATED)}
                                <div class="line">
                                    <span>
                                        добавлен:
                                    </span>
                                    {$c->created|default:''|escape}
                                </div>
                            {/if}



                            {* <!-- дата исправления --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_MODIFIED)}
                                {if $c->created|default:'' != $c->modified|default:''}
                                    <div class="line">
                                        <span>
                                            исправлен:
                                        </span>
                                        {$c->modified|default:''|escape}
                                    </div>
                                {/if}
                            {/if}



                            {* <!-- сведения о покупках --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_ORDERED) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_ORDERSCOUNT))}
                                {if isset($c->order_last_date) || isset($c->product_orders_count)}
                                    <div class="line">
                                        <span>
                                            покупки:
                                        </span>
                                        {if isset($c->product_orders_count) && !empty($c->product_orders_count)}{$c->product_orders_count|escape} раз{if isset($c->order_last_date)}, последняя {/if}{/if}
                                        {if isset($c->order_last_date)}{$c->order_last_date|escape}{/if}
                                    </div>
                                {/if}
                            {/if}



                            {* <!-- сведения об отзывах --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && (($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTED) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTS))}
                                {if isset($c->comment_last_date) || isset($c->product_comments_count)}
                                    <div class="line">
                                        <span>
                                            отзывы:
                                        </span>
                                        {if isset($c->product_comments_count) && !empty($c->product_comments_count)}{$c->product_comments_count|escape} раз{if isset($c->comment_last_date)}, последний {/if}{/if}
                                        {if isset($c->comment_last_date)}{$c->comment_last_date|escape}{/if}
                                    </div>
                                {/if}
                            {/if}



                            {* <!-- плагины --> *}
                            {if isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) && ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $smarty.const.SORT_PRODUCTS_MODE_BY_OBJECTS)}
                                {if $c->objects|default:'' != ''}
                                    <div class="line" title="Подключаемые плагины: {$c->objects|default:''|escape}">
                                        <span>
                                            плагины:
                                        </span>
                                        {$c->objects|default:''|escape}
                                    </div>
                                {/if}
                            {/if}



                            {* <!-- аннотация --> *}
                            {if isset($c->description) && ($c->description|strip_tags|replace:"&nbsp;":" "|strip != "")}
                                <div class="line" title="{$c->description|strip_tags|replace:"&nbsp;":" "|escape}">
                                    <span>
                                        аннотация:
                                    </span>
                                    {$c->description|strip_tags|replace:"&nbsp;":" "|escape}
                                </div>
                            {/if}



                            {* <!-- шаблон --> *}
                            {$value = $c->template|default:''}
                            {if $value != ''}
                                <div class="line">
                                    <span>
                                        шаблон:
                                    </span>
                                    {$param = $smarty.const.SEARCH_PRODUCTS_COMMAND_TEMPLATE|default:''}
                                    <a href="{$admin_script}" onclick="return SearchThis_PageRecordsFilter('items_form', '{$param|escape}{$value|escape}');" title="Показать все товары на таком шаблоне">
                                        <img src="{$admin_theme}images/microicon_showall_9x9.png" />
                                    </a> &nbsp; {**}
                                    {$value|escape}
                                </div>
                            {/if}



                            {* <!-- url --> *}
                            <div class="line{if !$c->enabled|default:false} gray{/if}">
                                <span>
                                    адрес:
                                </span>
                                {$url = $site|cat:(($c->url_path|default:'')|escape)|cat:(($c->url|default:'')|escape)}
                                {if $c->enabled|default:false}
                                    <a href="{$url}" title="Перейти на страницу товара в клиентской части сайта">
                                        {$url}
                                    </a>
                                {else}
                                    {$url}
                                {/if}
                            </div>

                        {/if}

                    </li>
                {/foreach}



                {* <!-- если выбрана сортировка "как расставлены", делаем элементы перетаскиваемыми в пределах контейнера --> *}
                {if !isset($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT]) || ($inputs[$smarty.const.REQUEST_PARAM_NAME_SORT] == $sort_as_is)}
                    {$items_container_close_tag}

                    {* <!-- скрипт передвигания элементов --> *}
                    <script language="JavaScript" type="text/javascript">
                        Make_FormItems_Sortable();
                    </script>
                {/if}



                {* <!-- пустой указатель требуемой команды --> *}
                {hidden_editbox param = 'REQUEST_PARAM_NAME_ACTION'
                                id = true
                                value = ''}



                {* <!-- признак отмены постинга --> *}
                {hidden_editbox param = 'REQUEST_PARAM_NAME_IGNORE_POST'
                                id = true
                                value = '1'}



                {* <!-- признак мини постинга (без некоторых полей записи) --> *}
                {hidden_editbox param = 'REQUEST_PARAM_NAME_POST_MINI'
                                id = false
                                value = '1'}



                {* <!-- аутентификатор операции --> *}
                {hidden_editbox param = 'REQUEST_PARAM_NAME_TOKEN'
                                id = false
                                value = true}



                {* <!-- навигатор страниц --> *}
                {$PagesNavigation|default:''}



            {* <!-- иначе массив записей пуст --> *}
            {else}

                {$param = $smarty.const.REQUEST_PARAM_NAME_SORT_LACONICAL|default:''}
                {$value = $inputs[$param]|default:false}
                <div class="noitems">
                    Не найдено товаров{if $value} (режим: лаконичный){/if}.
                </div>
            {/if}
        </form>



        {* <!-- справка --> *}
        <a name="help"></a>

        <div class="help" id="help_box" style="display: none;">
            <div class="title">
                Справка
            </div>

            <div>
                <b>Фильтр</b>. Расположен в верхней части страницы и обеспечивает {**}
                возможность выделить из общего списка товары по конкретным параметрам. {**}
                Поля фильтра можно сочетать произвольно, они объединены функцией И.
            </div>



            <div>
                <b>Товары не для продажи</b>. Помечены в списке серым цветом текста.
            </div>



            <div>
                <b>Перетаскивание товаров</b>. Когда выбрана сортировка товаров "как расставлены", {**}
                товары можно захватывать и перетаскивать ниже-выше других для изменения {**}
                порядка расположения товаров. Сохранение новой расстановки товаров происходит {**}
                только после нажатия кнопки "Применить".
            </div>
        </div>



        {* <!-- форма настроек --> *}
        <a name="settings"></a>

        <form action="{$admin_goto}Products" enctype="multipart/form-data" id="setup_form" method="post" {if $error|default:"" == ''} style="display: none;"{/if} onkeypress="return Ignore_KeypressSubmit(event);">
            <br>
            <h1>
                Настройки
            </h1>
            <br>



            <table align="center" cellpadding="0" cellspacing="10" class="white">



                {* <!-- для водяного знака --> *}
                <tr>
                    <td class="param_high" rowspan="34">
                        Водяной знак:
                        <center>
                            <img class="watermark" src="{$admin_site}{$settings->products_files_folder_prefix|escape}{$smarty.const.ADMIN_IMAGES_FOLDER_REFERENCE|escape}{$smarty.const.PRODUCTS_CLASS_WATERMARK_FILENAME|escape}?{math equation='rand(1, 1000000000)'}" title="Используемое изображение водяного знака для загружаемых в товар картинок" />
                        </center>
                    </td>
                    <td class="value" colspan="4" width="100%" title="Какой файл изображения водяного знака требуется взять с Вашего компьютера (объем файла не более {($smarty.const.WATERMARK_UPLOAD_MAXIMAL_FILESIZE/1024)|string_format:"%d"|escape} Кбайт)">
                        <input type="hidden" name="MAX_FILE_SIZE" value="{$smarty.const.WATERMARK_UPLOAD_MAXIMAL_FILESIZE|string_format:"%d"|escape}" />  <!-- Не позволяем загрузку файла объемом свыше заданного -->
                        <input class="edit" name="watermark_filename" type="file" />
                    </td>
                    <td class="param_short">
                        Наложить:
                    </td>
                    <td class="value" title="Как накладывать водяной знак (производится без масштабирования водяного знака)">
                        <select name="products_watermark_location">
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_LEFTTOP|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_LEFTTOP} selected{/if}>слева вверху</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_CENTERTOP|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_CENTERTOP} selected{/if}>в центре вверху</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_RIGHTTOP|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_RIGHTTOP} selected{/if}>справа вверху</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_LEFTCENTER|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_LEFTCENTER} selected{/if}>слева в центре</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_CENTER|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_CENTER} selected{/if}>по центру</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_RIGHTCENTER|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_RIGHTCENTER} selected{/if}>справа в центре</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_LEFTBOTTOM|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_LEFTBOTTOM} selected{/if}>слева внизу</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_CENTERBOTTOM|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_CENTERBOTTOM} selected{/if}>в центре внизу</option>
                            <option value="{$smarty.const.IMAGES_WATERMARK_LOCATION_RIGHTBOTTOM|escape}"{if $settings->products_watermark_location == $smarty.const.IMAGES_WATERMARK_LOCATION_RIGHTBOTTOM} selected{/if}>справа внизу</option>
                        </select>
                    </td>
                    <td class="param_short">
                        Видимость:
                    </td>
                    <td class="value" title="Видимость знака на картинке (чем меньше число, тем прозрачнее)">
                        <select name="products_watermark_transparency">
                            {section name="value" start=$smarty.const.SETTINGS_MINIMAL_WATERMARK_TRANSPARENCY loop=$smarty.const.SETTINGS_MAXIMAL_WATERMARK_TRANSPARENCY+1}
                                <option value="{$smarty.section.value.index}"{if $settings->products_watermark_transparency == $smarty.section.value.index} selected{/if}>
                                    {$smarty.section.value.index}%
                                </option>
                            {/section}
                        </select>
                    </td>
                    <td class="param_short" title="Добавлять ли водяной знак на загружаемые изображения">
                        <input class="checkbox" id="setup_form_watermark_enabled" name="products_watermark_enabled" type="checkbox"{if isset($settings->products_watermark_enabled) && ($settings->products_watermark_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_watermark_enabled');">
                            Разрешен
                        </span>
                    </td>
                </tr>



                {* <!-- для картинки --> *}
                <tr>
                    <td class="param_short">
                        Качество:
                    </td>
                    <td class="value" width="100%" title="Качество картинок и миниатюр в процентах (чем меньше число, тем хуже качество и меньше размер файла)">
                        <input class="edit" name="products_images_quality" type="text" value="{$settings->products_images_quality|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Размеры фото:
                    </td>
                    <td class="value" title="Предельная ширина картинок в точках (в пределах от {$smarty.const.SETTINGS_MINIMAL_IMAGES_WIDTH|escape} до {$smarty.const.SETTINGS_MAXIMAL_IMAGES_WIDTH|escape})">
                        <input class="edit" name="products_images_width" size="6" style="width: auto;" type="text" value="{$settings->products_images_width|escape|default:''}" />
                    </td>
                    <td class="value" title="Предельная высота картинок в точках (в пределах от {$smarty.const.SETTINGS_MINIMAL_IMAGES_HEIGHT|escape} до {$smarty.const.SETTINGS_MAXIMAL_IMAGES_HEIGHT|escape})">
                        <input class="edit" name="products_images_height" size="6" style="width: auto;" type="text" value="{$settings->products_images_height|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Миниатюры:
                    </td>
                    <td class="value" title="Предельная ширина уменьшенных картинок в точках (в пределах от {$smarty.const.SETTINGS_MINIMAL_THUMBNAIL_WIDTH|escape} до {$smarty.const.SETTINGS_MAXIMAL_THUMBNAIL_WIDTH|escape})">
                        <input class="edit" name="products_thumbnail_width" size="6" style="width: auto;" type="text" value="{$settings->products_thumbnail_width|escape|default:''}" />
                    </td>
                    <td class="value" title="Предельная высота уменьшенных картинок в точках (в пределах от {$smarty.const.SETTINGS_MINIMAL_THUMBNAIL_HEIGHT|escape} до {$smarty.const.SETTINGS_MAXIMAL_THUMBNAIL_HEIGHT|escape})">
                        <input class="edit" name="products_thumbnail_height" size="6" style="width: auto;" type="text" value="{$settings->products_thumbnail_height|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Подгонять ли размеры меньших изображений до указанных размеров">
                        <input class="checkbox" id="setup_form_images_exactly" name="products_images_exactly" type="checkbox"{if isset($settings->products_images_exactly) && ($settings->products_images_exactly == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_images_exactly');">
                            Точно
                        </span>
                    </td>
                </tr>



                {* <!-- для визуального редактора --> *}
                <tr>
                    <td class="param_short" colspan="3" title="Использовать ли визуальный редактор при редактировании товаров">
                        <input class="checkbox" id="setup_form_wysiwyg_disabled" name="products_wysiwyg_disabled" type="checkbox"{if isset($settings->products_wysiwyg_disabled) && ($settings->products_wysiwyg_disabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_wysiwyg_disabled');">
                            Отключить wysiwyg-редактор:
                        </span>
                    </td>
                    <td class="value" colspan="3" title="Как обрабатывать текст при отключенном визуальном редакторе">
                        <select name="products_wysiwyg_disabled_mode">
                            <option value="{$smarty.const.FIX_SIMPLE_TEXTAREA_TEXT_MODE_NO_ACTION|escape}"{if $settings->products_wysiwyg_disabled_mode == $smarty.const.FIX_SIMPLE_TEXTAREA_TEXT_MODE_NO_ACTION} selected{/if}>в тексте ничего не менять, не трогать разметочные теги</option>
                            <option value="{$smarty.const.FIX_SIMPLE_TEXTAREA_TEXT_MODE_ALL_TAGS_CLEAR|escape}"{if $settings->products_wysiwyg_disabled_mode == $smarty.const.FIX_SIMPLE_TEXTAREA_TEXT_MODE_ALL_TAGS_CLEAR} selected{/if}>из текста удалять все теги, пустые строки и лишние пробелы</option>
                        </select>
                    </td>
                    <td class="param_short" colspan="3" title="Разрешить ли системе заполнять пустые поля мета информации">
                        <input class="checkbox" id="setup_form_meta_autofill" name="products_meta_autofill" type="checkbox"{if isset($settings->products_meta_autofill) && ($settings->products_meta_autofill == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_meta_autofill');">
                            Автозаполнение полей мета тегов
                        </span>
                    </td>
                </tr>



                {* <!-- для упорядочения --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        Сортировать для клиента:
                    </td>
                    <td class="value" colspan="2" title="Как упорядочить список товаров, сформированный для клиентской стороны">
                        <select name="products_sort_method">
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_AS_IS|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_AS_IS} selected{/if}>как расставлены</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_NAME|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_NAME} selected{/if}>по алфавиту</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_PCODE|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_PCODE} selected{/if}>по буквенному коду</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_PRICE|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_PRICE} selected{/if}>по цене</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_QUANTITY|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_QUANTITY} selected{/if}>по наличию</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_PRICE_QUANTITY|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_PRICE_QUANTITY} selected{/if}>по цене + наличию</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_QUANTITY_PRICE|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_QUANTITY_PRICE} selected{/if}>по наличию + цене</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_VARIANTSCOUNT|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_VARIANTSCOUNT} selected{/if}>по числу вариантов</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_CREATED|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_CREATED} selected{/if}>по дате добавления</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_MODIFIED|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_MODIFIED} selected{/if}>по дате исправления</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_ORDERED|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_ORDERED} selected{/if}>по дате последней покупки</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_ORDERSCOUNT|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_ORDERSCOUNT} selected{/if}>по числу покупок</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTED|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTED} selected{/if}>по дате последнего отзыва</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTS|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_COMMENTS} selected{/if}>по числу отзывов</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_BROWSED|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_BROWSED} selected{/if}>по числу просмотров</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_VOTES|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_VOTES} selected{/if}>по числу голосов</option>
                            <option value="{$smarty.const.SORT_PRODUCTS_MODE_BY_RATING|escape}"{if $settings->products_sort_method == $smarty.const.SORT_PRODUCTS_MODE_BY_RATING} selected{/if}>по рейтингу</option>
                        </select>
                    </td>
                    <td class="param_short" title="Направление сортировки списка для клиентской стороны">
                        <input class="checkbox" id="setup_form_sort_direction" name="products_sort_direction" type="checkbox"{if isset($settings->products_sort_direction) && ($settings->products_sort_direction == $smarty.const.SORT_DIRECTION_DESCENDING)} checked{/if} value="{$smarty.const.SORT_DIRECTION_DESCENDING|escape}" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_sort_direction');">
                            по убыванию
                        </span>
                    </td>
                    <td class="param_short" title="Лаконичность сортировки элементов списка (убирать ли нецелевые записи)">
                        <input class="checkbox" id="setup_form_sort_laconical" name="products_sort_laconical" type="checkbox"{if !empty($settings->products_sort_laconical)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_sort_laconical');">
                            лаконично
                        </span>
                    </td>
                    <td class="param_short">
                        Префикс:
                    </td>
                    <td class="value" title="Префикс папки с картинками товаров">
                        <input class="edit" name="products_files_folder_prefix" type="text" value="{$settings->products_files_folder_prefix|escape|default:''}" />
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для блока "Хиты продаж" --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_HIT|default:''}
                        Оглавление списка "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                               Хиты
                                           </a>":
                    </td>
                    <td class="value" colspan="3" title="Оглавление списка 'Хиты продаж' на стороне клиента">
                        <input class="edit" name="products_hit_title" type="text" value="{$settings->products_hit_title|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Виден ли список 'Хиты продаж' на главной странице">
                        <input class="checkbox" id="setup_form_main_hit_enabled" name="products_main_hit_enabled" type="checkbox"{if isset($settings->products_main_hit_enabled) && ($settings->products_main_hit_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_main_hit_enabled');">
                            На главной
                        </span>
                    </td>
                    <td class="param_short" title="Виден ли список 'Хиты продаж' на странице товара">
                        <input class="checkbox" id="setup_form_hit_enabled" name="products_hit_enabled" type="checkbox"{if isset($settings->products_hit_enabled) && ($settings->products_hit_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_hit_enabled');">
                            В товаре
                        </span>
                    </td>
                    <td class="param_short" title="Перемешать ли случайным образом список 'Хиты продаж', когда он выводится в виде блока">
                        <input class="checkbox" id="setup_form_hit_random" name="products_hit_random" type="checkbox"{if isset($settings->products_hit_random) && ($settings->products_hit_random == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_hit_random');">
                            Случайно
                        </span>
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Мета описание:
                    </td>
                    <td class="value" colspan="4" title="Описание в мета информации страницы списка 'Хиты продаж' на стороне клиента">
                        <input class="edit" name="products_hit_description" type="text" value="{$settings->products_hit_description|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        В навигаторе:
                    </td>
                    <td class="value" title="Путевое название списка 'Хиты продаж' в навигаторе на стороне клиента">
                        <input class="edit" name="products_hit_path" type="text" value="{$settings->products_hit_path|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Ключевые слова:
                    </td>
                    <td class="value" colspan="3" title="Ключевые слова в мета информации страницы списка 'Хиты продаж' на стороне клиента">
                        <input class="edit" name="products_hit_keywords" type="text" value="{$settings->products_hit_keywords|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Длина списка:
                    </td>
                    <td class="value" title="Максимальное количество товаров в списке 'Хиты продаж', когда он выводится в виде блока">
                        <input class="edit" name="products_hit_maxcount" type="text" value="{$settings->products_hit_maxcount|escape|default:''}" />
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="8">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_BEST|default:''}
                        <u>Заметка</u>: Есть зеркальная страница "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                                                      Лучшие
                                                                  </a>" с другим URL. Зарезервирована на будущее.
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для блока "Новые поступления" --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_NEWEST|default:''}
                        Оглавление списка "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                               Новинки
                                           </a>":
                    </td>
                    <td class="value" colspan="3" title="Оглавление списка 'Новые поступления' на стороне клиента">
                        <input class="edit" name="products_newest_title" type="text" value="{$settings->products_newest_title|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Виден ли список 'Новые поступления' на главной странице">
                        <input class="checkbox" id="setup_form_main_newest_enabled" name="products_main_newest_enabled" type="checkbox"{if isset($settings->products_main_newest_enabled) && ($settings->products_main_newest_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_main_newest_enabled');">
                            На главной
                        </span>
                    </td>
                    <td class="param_short" title="Виден ли список 'Новые поступления' на странице товара">
                        <input class="checkbox" id="setup_form_newest_enabled" name="products_newest_enabled" type="checkbox"{if isset($settings->products_newest_enabled) && ($settings->products_newest_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_newest_enabled');">
                            В товаре
                        </span>
                    </td>
                    <td class="param_short" title="Перемешать ли случайным образом список 'Новые поступления', когда он выводится в виде блока">
                        <input class="checkbox" id="setup_form_newest_random" name="products_newest_random" type="checkbox"{if isset($settings->products_newest_random) && ($settings->products_newest_random == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_newest_random');">
                            Случайно
                        </span>
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Мета описание:
                    </td>
                    <td class="value" colspan="4" title="Описание в мета информации страницы списка 'Новые поступления' на стороне клиента">
                        <input class="edit" name="products_newest_description" type="text" value="{$settings->products_newest_description|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        В навигаторе:
                    </td>
                    <td class="value" title="Путевое название списка 'Новые поступления' в навигаторе на стороне клиента">
                        <input class="edit" name="products_newest_path" type="text" value="{$settings->products_newest_path|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Ключевые слова:
                    </td>
                    <td class="value" colspan="3" title="Ключевые слова в мета информации страницы списка 'Новые поступления' на стороне клиента">
                        <input class="edit" name="products_newest_keywords" type="text" value="{$settings->products_newest_keywords|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Длина списка:
                    </td>
                    <td class="value" title="Максимальное количество товаров в списке 'Новые поступления', когда он выводится в виде блока">
                        <input class="edit" name="products_newest_maxcount" type="text" value="{$settings->products_newest_maxcount|escape|default:''}" />
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Подмешивать в новинки товары:
                    </td>
                    <td class="value" colspan="4" title="Это возможность автоматизировать список новинок без ручной установки у товаров флажков &quot;Новинка&quot;">
                        {$value = ($settings->products_newest_days|default:0)|string_format:'%d'}
                        <select name="products_newest_days">
                            <option value="0" {if $value == 0} selected{/if}>
                                не надо
                            </option>
                            {section name = count loop = 31 start = 1}
                                <option value="{$smarty.section.count.index}" {if $value == $smarty.section.count.index} selected{/if}>
                                    добавленные за последние {$smarty.section.count.index} дней
                                </option>
                            {/section}
                        </select>
                    </td>
                    <td class="param_short" colspan="2">
                        &nbsp;
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="8">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_NEW|default:''}
                        <u>Заметка</u>: Есть страница "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                                           Недавно добавленные
                                                       </a>" с другим URL. Список недавних товаров.
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для блока "Акционные" --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_ACTIONAL|default:''}
                        Оглавление списка "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                               Акционные
                                           </a>":
                    </td>
                    <td class="value" colspan="3" title="Оглавление списка 'Акционные' на стороне клиента">
                        <input class="edit" name="products_actional_title" type="text" value="{$settings->products_actional_title|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Виден ли список 'Акционные' на главной странице">
                        <input class="checkbox" id="setup_form_main_actional_enabled" name="products_main_actional_enabled" type="checkbox"{if isset($settings->products_main_actional_enabled) && ($settings->products_main_actional_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_main_actional_enabled');">
                            На главной
                        </span>
                    </td>
                    <td class="param_short" title="Виден ли список 'Акционные' на странице товара">
                        <input class="checkbox" id="setup_form_actional_enabled" name="products_actional_enabled" type="checkbox"{if isset($settings->products_actional_enabled) && ($settings->products_actional_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_actional_enabled');">
                            В товаре
                        </span>
                    </td>
                    <td class="param_short" title="Перемешать ли случайным образом список 'Акционные', когда он выводится в виде блока">
                        <input class="checkbox" id="setup_form_actional_random" name="products_actional_random" type="checkbox"{if isset($settings->products_actional_random) && ($settings->products_actional_random == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_actional_random');">
                            Случайно
                        </span>
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Мета описание:
                    </td>
                    <td class="value" colspan="4" title="Описание в мета информации страницы списка 'Акционные' на стороне клиента">
                        <input class="edit" name="products_actional_description" type="text" value="{$settings->products_actional_description|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        В навигаторе:
                    </td>
                    <td class="value" title="Путевое название списка 'Акционные' в навигаторе на стороне клиента">
                        <input class="edit" name="products_actional_path" type="text" value="{$settings->products_actional_path|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Ключевые слова:
                    </td>
                    <td class="value" colspan="3" title="Ключевые слова в мета информации страницы списка 'Акционные' на стороне клиента">
                        <input class="edit" name="products_actional_keywords" type="text" value="{$settings->products_actional_keywords|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Длина списка:
                    </td>
                    <td class="value" title="Максимальное количество товаров в списке 'Акционные', когда он выводится в виде блока">
                        <input class="edit" name="products_actional_maxcount" type="text" value="{$settings->products_actional_maxcount|escape|default:''}" />
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для блока "Скоро в продаже" --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_AWAITED|default:''}
                        Оглавление списка "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                               Ожидаем
                                           </a>":
                    </td>
                    <td class="value" colspan="3" title="Оглавление списка 'Скоро в продаже' на стороне клиента">
                        <input class="edit" name="products_awaited_title" type="text" value="{$settings->products_awaited_title|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Виден ли список 'Скоро в продаже' на главной странице">
                        <input class="checkbox" id="setup_form_main_awaited_enabled" name="products_main_awaited_enabled" type="checkbox"{if isset($settings->products_main_awaited_enabled) && ($settings->products_main_awaited_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_main_awaited_enabled');">
                            На главной
                        </span>
                    </td>
                    <td class="param_short" title="Виден ли список 'Скоро в продаже' на странице товара">
                        <input class="checkbox" id="setup_form_awaited_enabled" name="products_awaited_enabled" type="checkbox"{if isset($settings->products_awaited_enabled) && ($settings->products_awaited_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_awaited_enabled');">
                            В товаре
                        </span>
                    </td>
                    <td class="param_short" title="Перемешать ли случайным образом список 'Скоро в продаже', когда он выводится в виде блока">
                        <input class="checkbox" id="setup_form_awaited_random" name="products_awaited_random" type="checkbox"{if isset($settings->products_awaited_random) && ($settings->products_awaited_random == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_awaited_random');">
                            Случайно
                        </span>
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Мета описание:
                    </td>
                    <td class="value" colspan="4" title="Описание в мета информации страницы списка 'Скоро в продаже' на стороне клиента">
                        <input class="edit" name="products_awaited_description" type="text" value="{$settings->products_awaited_description|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        В навигаторе:
                    </td>
                    <td class="value" title="Путевое название списка 'Скоро в продаже' в навигаторе на стороне клиента">
                        <input class="edit" name="products_awaited_path" type="text" value="{$settings->products_awaited_path|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Ключевые слова:
                    </td>
                    <td class="value" colspan="3" title="Ключевые слова в мета информации страницы списка 'Скоро в продаже' на стороне клиента">
                        <input class="edit" name="products_awaited_keywords" type="text" value="{$settings->products_awaited_keywords|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Длина списка:
                    </td>
                    <td class="value" title="Максимальное количество товаров в списке 'Скоро в продаже', когда он выводится в виде блока">
                        <input class="edit" name="products_awaited_maxcount" type="text" value="{$settings->products_awaited_maxcount|escape|default:''}" />
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для блока "Недавно покупали" --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_ORDERED|default:''}
                        Оглавление списка "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                               Покупали
                                           </a>":
                    </td>
                    <td class="value" colspan="3" title="Оглавление списка 'Недавно покупали' на стороне клиента">
                        <input class="edit" name="products_ordered_title" type="text" value="{$settings->products_ordered_title|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Виден ли список 'Недавно покупали' на главной странице">
                        <input class="checkbox" id="setup_form_main_ordered_enabled" name="products_main_ordered_enabled" type="checkbox"{if isset($settings->products_main_ordered_enabled) && ($settings->products_main_ordered_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_main_ordered_enabled');">
                            На главной
                        </span>
                    </td>
                    <td class="param_short" title="Виден ли список 'Недавно покупали' на странице товара">
                        <input class="checkbox" id="setup_form_ordered_enabled" name="products_ordered_enabled" type="checkbox"{if isset($settings->products_ordered_enabled) && ($settings->products_ordered_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_ordered_enabled');">
                            В товаре
                        </span>
                    </td>
                    <td class="param_short" title="Перемешать ли случайным образом список 'Недавно покупали', когда он выводится в виде блока">
                        <input class="checkbox" id="setup_form_ordered_random" name="products_ordered_random" type="checkbox"{if isset($settings->products_ordered_random) && ($settings->products_ordered_random == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_ordered_random');">
                            Случайно
                        </span>
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Мета описание:
                    </td>
                    <td class="value" colspan="4" title="Описание в мета информации страницы списка 'Недавно покупали' на стороне клиента">
                        <input class="edit" name="products_ordered_description" type="text" value="{$settings->products_ordered_description|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        В навигаторе:
                    </td>
                    <td class="value" title="Путевое название списка 'Недавно покупали' в навигаторе на стороне клиента">
                        <input class="edit" name="products_ordered_path" type="text" value="{$settings->products_ordered_path|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Ключевые слова:
                    </td>
                    <td class="value" colspan="3" title="Ключевые слова в мета информации страницы списка 'Недавно покупали' на стороне клиента">
                        <input class="edit" name="products_ordered_keywords" type="text" value="{$settings->products_ordered_keywords|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Длина списка:
                    </td>
                    <td class="value" title="Максимальное количество товаров в списке 'Недавно покупали', когда он выводится в виде блока">
                        <input class="edit" name="products_ordered_maxcount" type="text" value="{$settings->products_ordered_maxcount|escape|default:''}" />
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для блока "Недавно обсуждали" --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        {$param = $smarty.const.REQUEST_PARAM_NAME_CATALOG_MODE|default:''}
                        {$value = $smarty.const.CATALOG_MODE_REQUEST_PARAM_VALUE_COMMENTED|default:''}
                        Оглавление списка "<a href="{$site}?{$param|escape}={$value|escape}" target="_blank" title="Перейти на такую страницу на клиентской стороне">
                                               Обсуждали
                                           </a>":
                    </td>
                    <td class="value" colspan="3" title="Оглавление списка 'Недавно обсуждали' на стороне клиента">
                        <input class="edit" name="products_commented_title" type="text" value="{$settings->products_commented_title|escape|default:''}" />
                    </td>
                    <td class="param_short" title="Виден ли список 'Недавно обсуждали' на главной странице">
                        <input class="checkbox" id="setup_form_main_commented_enabled" name="products_main_commented_enabled" type="checkbox"{if isset($settings->products_main_commented_enabled) && ($settings->products_main_commented_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_main_commented_enabled');">
                            На главной
                        </span>
                    </td>
                    <td class="param_short" title="Виден ли список 'Недавно обсуждали' на странице товара">
                        <input class="checkbox" id="setup_form_commented_enabled" name="products_commented_enabled" type="checkbox"{if isset($settings->products_commented_enabled) && ($settings->products_commented_enabled == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_commented_enabled');">
                            В товаре
                        </span>
                    </td>
                    <td class="param_short" title="Перемешать ли случайным образом список 'Недавно обсуждали', когда он выводится в виде блока">
                        <input class="checkbox" id="setup_form_commented_random" name="products_commented_random" type="checkbox"{if isset($settings->products_commented_random) && ($settings->products_commented_random == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_commented_random');">
                            Случайно
                        </span>
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Мета описание:
                    </td>
                    <td class="value" colspan="4" title="Описание в мета информации страницы списка 'Недавно обсуждали' на стороне клиента">
                        <input class="edit" name="products_commented_description" type="text" value="{$settings->products_commented_description|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        В навигаторе:
                    </td>
                    <td class="value" title="Путевое название списка 'Недавно обсуждали' в навигаторе на стороне клиента">
                        <input class="edit" name="products_commented_path" type="text" value="{$settings->products_commented_path|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Ключевые слова:
                    </td>
                    <td class="value" colspan="3" title="Ключевые слова в мета информации страницы списка 'Недавно обсуждали' на стороне клиента">
                        <input class="edit" name="products_commented_keywords" type="text" value="{$settings->products_commented_keywords|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Длина списка:
                    </td>
                    <td class="value" title="Максимальное количество товаров в списке 'Недавно обсуждали', когда он выводится в виде блока">
                        <input class="edit" name="products_commented_maxcount" type="text" value="{$settings->products_commented_maxcount|escape|default:''}" />
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                {* <!-- разграничительная строка --> *}
                <tr>
                    <td colspan="8">
                        &nbsp;
                    </td>
                </tr>



                {* <!-- для отзывов --> *}
                <tr>
                    <td class="param_short" colspan="3">
                        Оглавление блока отзывов:
                    </td>
                    <td class="value" colspan="2" title="Оглавление блока 'Отзывы на товар' на странице товара (символ * будет заменен названием товара)">
                        <input class="edit" name="products_comments_title" type="text" value="{$settings->products_comments_title|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Товаров:
                    </td>
                    <td class="value" title="Количество товаров на странице в списке стороны клиента (в пределах от {$smarty.const.SETTINGS_MINIMAL_PRODUCTS_NUM|escape} до {$smarty.const.SETTINGS_MAXIMAL_PRODUCTS_NUM|escape})">
                        <input class="edit" name="products_num" type="text" value="{$settings->products_num|escape|default:''}" />
                    </td>
                    <td class="param_short">
                        Админпанель:
                    </td>
                    <td class="value" title="Количество товаров в списке админпанели (в пределах от {$smarty.const.SETTINGS_MINIMAL_PRODUCTS_NUM_ADMIN|escape} до {$smarty.const.SETTINGS_MAXIMAL_PRODUCTS_NUM_ADMIN|escape})">
                        <input class="edit" name="products_num_admin" type="text" value="{$settings->products_num_admin|escape|default:''}" />
                    </td>
                </tr>



                <tr>
                    <td class="param_short" colspan="3">
                        Антиспам пауза между отзывами:
                    </td>
                    <td class="value" colspan="2" title="Через какое время пользователю разрешить отправлять следующий отзыв на товар">
                        <select name="products_comment_next_time">
                            <option value="0">без паузы</option>
                            {$prev_value = 0}
                            {section name=count loop=121 start=5 step=5}
                                <option value="{$smarty.section.count.index}"{if ($settings->products_comment_next_time|default:30 > $prev_value) && ($settings->products_comment_next_time|default:30 <= $smarty.section.count.index)} selected{/if}>
                                    {$smarty.section.count.index} секунд
                                </option>
                                {$prev_value = $smarty.section.count.index}
                            {/section}
                        </select>
                    </td>
                    <td class="param_short" colspan="3" title="Включить ли модерацию отзывов на товары">
                        <input class="checkbox" id="setup_form_comments_moderation" name="products_comment_moderation" type="checkbox"{if isset($settings->products_comment_moderation) && ($settings->products_comment_moderation == 1)} checked{/if} value="1" /> {**}
                        <span onclick="Toggle_PageCheckbox('setup_form_comments_moderation');">
                            Включить модерацию отзывов
                        </span>
                    </td>
                    <td class="value_box">
                        <input class="submit" name="{$smarty.const.REQUEST_PARAM_NAME_SETUP|escape}" type="submit" value="Сохранить" />
                    </td>
                </tr>



                {* <!-- пустая замыкающая строка --> *}
                <tr>
                    <td colspan="9">
                        <!-- // -->
                    </td>
                </tr>
            </table>



            {* <!-- аутентификатор операции --> *}
            {hidden_editbox param = 'REQUEST_PARAM_NAME_TOKEN'
                            id = false
                            value = true}
        </form>

    </div>

{/strip}